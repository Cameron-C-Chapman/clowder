{"name":"clowder","tagline":"Utility for managing multiple git repositories","body":"> **clowder** - A group of cats\r\n\r\n> **herding cats** - An idiom that refers to a frustrating attempt to control or organize a class of entities which are uncontrollable or chaotic.\r\n\r\nManaging multiple repositories can be pretty frustrating. There are a number of existing options:\r\n\r\n- [git submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)\r\n- [subtree merging](https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging)\r\n- [Google's repo tool](https://code.google.com/p/git-repo/)\r\n- [GitSlave](http://gitslave.sourceforge.net)\r\n- [braid](https://github.com/cristibalan/braid)\r\n- [giternal](https://github.com/patmaddox/giternal)\r\n- [git-submanage](https://github.com/idbrii/git-submanage)\r\n- [gr](https://github.com/mixu/gr)\r\n- [git-stree](https://github.com/tdd/git-stree)\r\n- [git-subrepo](https://github.com/ingydotnet/git-subrepo)\r\n\r\nAll of these have their own approach, but many are based on submodules or subtrees. Submodules and subtrees create a tight coupling between repositories because of the way dependencies are stored. Much has been written about their drawbacks elsewhere. Google's `repo` tool takes a different approach, but is closely tied to Google's development workflow (and doesn't have a great deal of documentation).\r\n\r\n`clowder` uses a similar approach as `repo` (and as it turns out, `gr` and `giternal`) with a yaml file instead of xml (and without the default rebasing behavior of `repo`). URL information and relative project locations on disk are specified in a `clowder.yaml` file. This file is checked into its own repository, so the project structure's history is saved under version control. The use of a separate file for tracking projects means that there's detailed information about the dependencies between them, but each repository is still essentially independent. Projects can be tied to specific tags or commits, or can track branches. Specific versions can be saved from the current commit hashes of projects on disk for later restoration.\r\n\r\nThe primary purpose of `clowder` is synchronization of multiple repositories, so normal development still takes place in individual repositories with the usual `git` commands.\r\n\r\nFor a few example projects, see the [examples directory](https://github.com/JrGoodle/clowder/tree/master/examples).\r\n\r\n## Getting Started\r\n\r\n### Requirements\r\n\r\n- [Python 3](https://www.python.org/downloads/)\r\n- [pip3](https://pypi.python.org/pypi/pip) (and [setuptools](https://pypi.python.org/pypi/setuptools))\r\n\r\n### Installation\r\n\r\n```bash\r\n$ git clone https://github.com/JrGoodle/clowder.git\r\n$ cd clowder && ./install.sh\r\n```\r\n\r\nFor terminal autocompletion, add the following to your shell profile:\r\n\r\n```bash\r\n[[ -f \"/usr/local/bin/clowder\" ]] && eval \"$(register-python-argcomplete clowder)\"\r\n```\r\n\r\n### Usage\r\n\r\nThis example is based on the LLVM project. See [the full clowder.yaml](https://github.com/JrGoodle/llvm-projects/blob/master/clowder.yaml).\r\n\r\nFirst create a directory to contain all the projects.\r\n\r\n```bash\r\n$ mkdir llvm-projects && cd llvm-projects\r\n```\r\n\r\nClone repository containing `clowder.yaml` file.\r\n\r\n```bash\r\n$ clowder breed https://github.com/jrgoodle/llvm-projects.git\r\n```\r\n\r\nThe `clowder breed` command will clone the [llvm-projects](https://github.com/jrgoodle/llvm-projects.git) repository in the `llvm-projects/clowder` directory and create a symlink at `llvm-projects/clowder.yaml`.\r\n\r\n```bash\r\n$ clowder herd\r\n```\r\n\r\nThe `clowder herd` command syncs the projects. The `clowder.yaml` symlink is always updated to point to the primary `clowder.yaml` file in the repository cloned with `clowder breed`. Projects are cloned if they don't currently exist. Otherwise, each project will pull the latest changes. If the current branch isn't the default, it'll be checked out, and latest changes pulled. For commits and tags, the commits are checked out into a detached HEAD state (`clowder forall` can be used to checkout branches if needed).\r\n\r\n```bash\r\n$ clowder sync\r\n```\r\n\r\nThe `clowder sync` command is like `clowder herd`, but for syncing the repository containing the `clowder.yaml` file (located in the `clowder` directory created with the `clowder breed` command). It will try to pull latest changes for whatever branch is currently checked out in the `clowder` directory. If the repository is in a detached HEAD state, a message will be printed indicating this, and the command will exit without trying to pull any new changes.\r\n\r\n### Further Commands\r\n\r\n```bash\r\n$ clowder meow # print status of projects\r\n$ clowder meow -v # print more verbose status of projects\r\n$ clowder meow -g clang llvm # print status of projects in clang and llvm groups\r\n$ clowder meow -v -g clang # print verbose status of projects in clang group\r\n```\r\n\r\n```bash\r\n$ clowder groom # Discard any changes in projects\r\n$ clowder groom -g clang # Discard any changes in projects in clang group\r\n$ clowder groom -p llvm-mirror/clang # Discard any changes in clang project\r\n```\r\n\r\n```bash\r\n$ clowder stash # Stash any changes in projects\r\n$ clowder stash -g clang # Stash any changes in projects in clang group\r\n$ clowder stash -p llvm-mirror/clang # Stash any changes in clang project\r\n```\r\n\r\n```bash\r\n$ clowder fix v0.1 # Fix new version of clowder.yaml\r\n```\r\n\r\n```bash\r\n$ clowder herd -g clang llvm # Only herd projects in clang and llvm groups\r\n$ clowder herd -p llvm-mirror/clang # Only herd clang project\r\n$ clowder herd -v v0.1 # Check out fixed version\r\n```\r\n\r\n```bash\r\n$ CMD='git status'\r\n$ clowder forall \"$CMD\" # Run \"$CMD\" in all project directories\r\n$ clowder forall \"$CMD\" -g clang # Run \"$CMD\" only for projects in clang group\r\n$ clowder forall \"$CMD\" -p llvm-mirror/clang # Run \"$CMD\" only for clang project\r\n```\r\n\r\n## The `clowder.yaml` File\r\n\r\n### Defaults\r\n\r\nThe **defaults** specify the default `ref`, `source`, and `remote` for projects.\r\n\r\n```yaml\r\ndefaults:\r\n    ref: refs/heads/master\r\n    remote: origin\r\n    source: github\r\n```\r\n\r\n### Sources\r\n\r\nMultiple **sources** can be specified for use with different projects.\r\n\r\n```yaml\r\nsources:\r\n    - name: github-ssh\r\n      url: ssh://git@github.com\r\n    - name: github\r\n      url: https://github.com\r\n```\r\n\r\n### Groups and Projects\r\n\r\n**Groups** have a `name` and associated `projects`.\r\nAt a minimum, **projects** need the `name` from the project's url, and the `path` to clone relative to the root directory.\r\nThe default `remote`, `source`, and `ref` values can also be overridden on a per-project basis. It's also easy to add references to central repositories and forks in the same `clowder.yaml` file.\r\n\r\n```yaml\r\ngroups:\r\n    - name: llvm\r\n      projects:\r\n        - name: llvm-mirror/llvm\r\n          path: llvm\r\n    - name: clang\r\n      projects:\r\n        - name: llvm-mirror/clang\r\n          path: llvm/tools/clang\r\n          remote: upstream\r\n        - name: llvm-mirror/clang-tools-extra\r\n          path: llvm/tools/clang/tools/extra\r\n          remote: upstream\r\n    - name: forks\r\n      projects:\r\n        - name: jrgoodle/clang\r\n          path: llvm/tools/clang\r\n        - name: jrgoodle/clang-tools-extra\r\n          path: llvm/tools/clang/tools/extra\r\n        - name: jrgoodle/compiler-rt\r\n          path: llvm/projects/compiler-rt\r\n    - name: projects\r\n      projects:\r\n        - name: llvm-mirror/compiler-rt\r\n          path: llvm/projects/compiler-rt\r\n          remote: upstream\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}