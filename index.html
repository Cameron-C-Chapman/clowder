<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>clowder by JrGoodle</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>clowder</h1>
        <h2>Utility for managing multiple git repositories</h2>
        <a href="https://github.com/JrGoodle/clowder" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <blockquote>
<p><strong>clowder</strong> - A group of cats</p>

<p><strong>herding cats</strong> - An idiom that refers to a frustrating attempt to control or organize a class of entities which are uncontrollable or chaotic.</p>
</blockquote>

<p>Managing multiple repositories can be pretty frustrating. There are a number of existing options:</p>

<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodules</a></li>
<li><a href="https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging">subtree merging</a></li>
<li><a href="https://code.google.com/p/git-repo/">Google's repo tool</a></li>
<li><a href="http://gitslave.sourceforge.net">GitSlave</a></li>
<li><a href="https://github.com/cristibalan/braid">braid</a></li>
<li><a href="https://github.com/patmaddox/giternal">giternal</a></li>
<li><a href="https://github.com/idbrii/git-submanage">git-submanage</a></li>
<li><a href="https://github.com/mixu/gr">gr</a></li>
<li><a href="https://github.com/tdd/git-stree">git-stree</a></li>
<li><a href="https://github.com/ingydotnet/git-subrepo">git-subrepo</a></li>
</ul>

<p>All of these have their own approach, but many are based on submodules or subtrees. Submodules and subtrees create a tight coupling between repositories because of the way dependencies are stored. Much has been written about their drawbacks elsewhere. Google's <code>repo</code> tool takes a different approach, but is closely tied to Google's development workflow.</p>

<p><code>clowder</code> uses a similar approach as <code>repo</code> (and as it turns out, <code>gr</code> and <code>giternal</code>) with a yaml file instead of xml. URL information and relative project locations on disk are specified in a <code>clowder.yaml</code> file. This file is checked into its own repository. The use of a separate file for tracking projects means that there's detailed information about the dependencies between them, but each repository is still essentially independent. Projects can be tied to specific tags or commits, or can track branches. With the <code>clowder fix &lt;version&gt;</code> command, specific versions of the <code>clowder.yaml</code> file can be saved from the current commit hashes of all projects for later restoration.</p>

<p>The primary purpose of <code>clowder</code> is synchronization of multiple repositories, so normal development still takes place in individual repositories with the usual <code>git</code> commands.</p>

<p>For a few example projects, see the <a href="https://github.com/JrGoodle/clowder/tree/master/examples">examples directory</a>.</p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h3>

<ul>
<li><a href="https://www.python.org/downloads/">Python 3</a></li>
<li>
<a href="https://pypi.python.org/pypi/pip">pip3</a> (and <a href="https://pypi.python.org/pypi/setuptools">setuptools</a>)</li>
</ul>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>To install from the <a href="https://github.com/JrGoodle/clowder/releases">GitHub Releases</a> open a terminal and run:</p>

<div class="highlight highlight-source-shell"><pre>$ pip3 install https://github.com/JrGoodle/clowder/releases/download/0.8.3/clowder-0.8.3-py3-none-any.whl</pre></div>

<p>To install from the cloned repository:</p>

<div class="highlight highlight-source-shell"><pre>$ git clone https://github.com/JrGoodle/clowder.git
$ <span class="pl-c1">cd</span> clowder <span class="pl-k">&amp;&amp;</span> ./install.sh</pre></div>

<p>For terminal autocompletion, add the following to your shell profile:</p>

<div class="highlight highlight-source-shell"><pre>[[ <span class="pl-k">-f</span> <span class="pl-s"><span class="pl-pds">"</span>/usr/local/bin/clowder<span class="pl-pds">"</span></span> ]] <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">eval</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s"><span class="pl-pds">$(</span>register-python-argcomplete clowder<span class="pl-pds">)</span></span><span class="pl-pds">"</span></span></pre></div>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>This example is based on the LLVM project (see <a href="https://github.com/JrGoodle/llvm-projects/blob/master/clowder.yaml">the full clowder.yaml</a>). First create a directory to contain all the projects.</p>

<div class="highlight highlight-source-shell"><pre>$ mkdir llvm-projects <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> llvm-projects</pre></div>

<p>Clone repository containing <code>clowder.yaml</code> file.</p>

<div class="highlight highlight-source-shell"><pre>$ clowder breed https://github.com/jrgoodle/llvm-projects.git</pre></div>

<p>The <code>clowder breed</code> command will clone the <a href="https://github.com/jrgoodle/llvm-projects.git">llvm-projects</a> repository in the <code>llvm-projects/.clowder</code> directory and create a symlink pointing to the primary <code>clowder.yaml</code> file in the repository:</p>

<pre><code>llvm-projects/clowder.yaml -&gt; llvm-projects/.clowder/clowder.yaml
</code></pre>

<p>Next sync all repositories:</p>

<div class="highlight highlight-source-shell"><pre>$ clowder herd</pre></div>

<p>The <code>clowder herd</code> command syncs the projects. The <code>clowder.yaml</code> symlink is always updated to point to the primary <code>clowder.yaml</code> file in the repository cloned with <code>clowder breed</code>. Projects are cloned if they don't currently exist. Otherwise, each project will pull the latest changes. If the current branch isn't the default, it'll be checked out, and latest changes pulled. For commits and tags, the commits are checked out into a detached <code>HEAD</code> state (<code>clowder forall</code> can then be used to checkout/create branches).</p>

<h3>
<a id="further-commands" class="anchor" href="#further-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further Commands</h3>

<div class="highlight highlight-source-shell"><pre>$ clowder fix 0.1 <span class="pl-c"># Save a fixed version of clowder.yaml</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-k">export</span> CMD=<span class="pl-s"><span class="pl-pds">'</span>git status<span class="pl-pds">'</span></span>
$ clowder forall <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$CMD</span><span class="pl-pds">"</span></span> <span class="pl-c"># Run $CMD in all project directories</span>
$ clowder forall <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$CMD</span><span class="pl-pds">"</span></span> -g clang <span class="pl-c"># Run $CMD only for projects in clang group</span>
$ clowder forall <span class="pl-s"><span class="pl-pds">"</span><span class="pl-smi">$CMD</span><span class="pl-pds">"</span></span> -p llvm-mirror/clang <span class="pl-c"># Run $CMD only for clang project</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ clowder groom <span class="pl-c"># Discard any changes in projects</span>
$ clowder groom -g clang <span class="pl-c"># Discard any changes in projects in clang group</span>
$ clowder groom -p llvm-mirror/clang <span class="pl-c"># Discard any changes in clang project</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ clowder herd -g clang llvm <span class="pl-c"># Only herd projects in clang and llvm groups</span>
$ clowder herd -p llvm-mirror/clang <span class="pl-c"># Only herd clang project</span>
$ clowder herd -v 0.1 <span class="pl-c"># Point clowder.yaml symlink to fixed version</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ clowder meow <span class="pl-c"># print status of projects</span>
$ clowder meow -v <span class="pl-c"># print more verbose status of projects</span>
$ clowder meow -g clang llvm <span class="pl-c"># print status of projects in clang and llvm groups</span>
$ clowder meow -v -g clang <span class="pl-c"># print verbose status of projects in clang group</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ clowder repo <span class="pl-s"><span class="pl-pds">'</span>git status<span class="pl-pds">'</span></span> <span class="pl-c"># Run 'git status' in .clowder directory</span></pre></div>

<div class="highlight highlight-source-shell"><pre>$ clowder stash <span class="pl-c"># Stash any changes in projects</span>
$ clowder stash -g clang <span class="pl-c"># Stash any changes in projects in clang group</span>
$ clowder stash -p llvm-mirror/clang <span class="pl-c"># Stash any changes in clang project</span></pre></div>

<h2>
<a id="the-clowderyaml-file" class="anchor" href="#the-clowderyaml-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>clowder.yaml</code> File</h2>

<h3>
<a id="defaults" class="anchor" href="#defaults" aria-hidden="true"><span class="octicon octicon-link"></span></a>Defaults</h3>

<p>The <code>defaults</code> specify the default <code>ref</code>, <code>source</code>, and <code>remote</code> for projects.</p>

<div class="highlight highlight-source-yaml"><pre><span class="pl-s"><span class="pl-ent">defaults:</span></span>
    <span class="pl-s"><span class="pl-ent">ref:</span> <span class="pl-s">refs/heads/master</span></span>
    <span class="pl-s"><span class="pl-ent">remote:</span> <span class="pl-s">origin</span></span>
    <span class="pl-s"><span class="pl-ent">source:</span> <span class="pl-s">github</span></span></pre></div>

<h3>
<a id="sources" class="anchor" href="#sources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sources</h3>

<p>Multiple <code>sources</code> can be specified for use with different projects.</p>

<div class="highlight highlight-source-yaml"><pre><span class="pl-s"><span class="pl-ent">sources:</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">github-ssh</span></span>
      <span class="pl-s"><span class="pl-ent">url:</span> <span class="pl-s">ssh://git@github.com</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">github</span></span>
      <span class="pl-s"><span class="pl-ent">url:</span> <span class="pl-s">https://github.com</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">bitbucket</span></span>
      <span class="pl-s"><span class="pl-ent">url:</span> <span class="pl-s">ssh://git@bitbucket.org</span></span></pre></div>

<h3>
<a id="groups-and-projects" class="anchor" href="#groups-and-projects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Groups and Projects</h3>

<p>The <code>groups</code> each have a <code>name</code> and associated <code>projects</code>.
At a minimum, <code>projects</code> need the <code>name</code> from the project's url, and the <code>path</code> to clone relative to the root directory.
The default <code>remote</code>, <code>source</code>, and <code>ref</code> values can be overridden on a per-project basis. It's also easy to add references to central repositories and forks in the same <code>clowder.yaml</code> file by specifying different <code>remote</code> names.</p>

<div class="highlight highlight-source-yaml"><pre><span class="pl-s"><span class="pl-ent">groups:</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">llvm</span></span>
      <span class="pl-s"><span class="pl-ent">projects:</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">llvm-mirror/llvm</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">clang</span></span>
      <span class="pl-s"><span class="pl-ent">projects:</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">llvm-mirror/clang</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/tools/clang</span></span>
          <span class="pl-s"><span class="pl-ent">remote:</span> <span class="pl-s">upstream</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">llvm-mirror/clang-tools-extra</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/tools/clang/tools/extra</span></span>
          <span class="pl-s"><span class="pl-ent">remote:</span> <span class="pl-s">upstream</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">forks</span></span>
      <span class="pl-s"><span class="pl-ent">projects:</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">jrgoodle/clang</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/tools/clang</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">jrgoodle/clang-tools-extra</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/tools/clang/tools/extra</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">jrgoodle/compiler-rt</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/projects/compiler-rt</span></span>
    <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">projects</span></span>
      <span class="pl-s"><span class="pl-ent">projects:</span></span>
        <span class="pl-s">- <span class="pl-ent">name:</span> <span class="pl-s">llvm-mirror/compiler-rt</span></span>
          <span class="pl-s"><span class="pl-ent">path:</span> <span class="pl-s">llvm/projects/compiler-rt</span></span>
          <span class="pl-s"><span class="pl-ent">remote:</span> <span class="pl-s">upstream</span></span></pre></div>

<h3>
<a id="refs" class="anchor" href="#refs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refs</h3>

<p>The <code>ref</code> can specify a branch, tag, or commit hash with the following patterns:</p>

<div class="highlight highlight-source-yaml"><pre><span class="pl-c"># branch</span>
<span class="pl-s"><span class="pl-ent">ref:</span> <span class="pl-s">refs/heads/knead </span></span><span class="pl-c"># track branch 'knead'</span>
<span class="pl-c"># tag</span>
<span class="pl-s"><span class="pl-ent">ref:</span> <span class="pl-s">refs/tags/v0.01 </span></span><span class="pl-c"># point to commit with tag 'v0.01'</span>
<span class="pl-c"># commit</span>
<span class="pl-s"><span class="pl-ent">ref:</span> <span class="pl-s">7083e8840e1bb972b7664cfa20bbd7a25f004018 </span></span><span class="pl-c"># point to commit hash</span></pre></div>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/JrGoodle/clowder/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/JrGoodle/clowder/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/JrGoodle/clowder"></a> is maintained by <a href="https://github.com/JrGoodle">JrGoodle</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
